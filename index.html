<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lanc- Gestão de Pedidos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .button-container {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        #pedidoForm, #pedidosTabela, #popup {
            display: none;
        }
        .item {
            margin-bottom: 15px;
        }
        .item span {
            font-weight: bold;
            margin-right: 10px;
        }
        .quantity-controls {
            display: inline-block;
            width: 50px;
            text-align: center;
        }
        .quantity-controls button {
            padding: 5px;
            width: 30px;
        }
        #popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none; /* Pop-up inicialmente oculto */
            justify-content: center;
            align-items: center;
        }
        #popupContent {
            background: white;
            padding: 20px;
            border-radius: 10px;
        }
        #popupContent h3 {
            margin: 0 0 15px;
        }
        .popup-button {
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <h1>Bem-vindo à Lanchonete!</h1>

    <div class="button-container">
        <button id="btnInserirPedido">Inserir Novo Pedido</button>
        <button id="btnVerPedidos">Ver Pedidos Inseridos</button>
    </div>

    <!-- Tela para Inserir Pedido -->
    <div id="pedidoForm">
        <h2>Cardápio</h2>
        <div id="cardapio">
            <div class="item">
                <span>Max Burguer - R$20</span>
                <div class="quantity-controls">
                    <button class="decrement">-</button>
                    <span id="maxBurguerQty">0</span>
                    <button class="increment">+</button>
                </div>
            </div>
            <div class="item">
                <span>X Tudo - R$23</span>
                <div class="quantity-controls">
                    <button class="decrement">-</button>
                    <span id="xTudoQty">0</span>
                    <button class="increment">+</button>
                </div>
            </div>
            <div class="item">
                <span>X Egg Bacon - R$17</span>
                <div class="quantity-controls">
                    <button class="decrement">-</button>
                    <span id="xEggBaconQty">0</span>
                    <button class="increment">+</button>
                </div>
            </div>
            <div class="item">
                <span>Coca Pequena - R$3</span>
                <div class="quantity-controls">
                    <button class="decrement">-</button>
                    <span id="cocaPequenaQty">0</span>
                    <button class="increment">+</button>
                </div>
            </div>
            <div class="item">
                <span>Heineken - R$10</span>
                <div class="quantity-controls">
                    <button class="decrement">-</button>
                    <span id="heinekenQty">0</span>
                    <button class="increment">+</button>
                </div>
            </div>
        </div>
        <button id="concluirPedido">Concluir Pedido</button>
        <button id="btnVoltar">Voltar</button>
        <div>
            <p>Total de itens: <span id="totalItens">0</span></p>
            <p>Valor total: R$<span id="totalValor">0</span></p>
        </div>
    </div>

    <!-- Tela para Ver Pedidos -->
    <div id="pedidosTabela">
        <h3>Pedidos Inseridos</h3>
        <table id="pedidosTabelaContent" border="1">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Pedido</th>
                    <th>Quantidade</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <!-- Os pedidos inseridos serão exibidos aqui -->
            </tbody>
        </table>
        <button id="btnVoltarPedidos">Voltar</button>
    </div>

    <!-- Pop-up para Confirmar Pedido -->
    <div id="popup">
        <div id="popupContent">
            <h3>Resumo do Pedido</h3>
            <ul id="resumoPedido">
                <!-- Resumo dos itens do pedido -->
            </ul>
            <button class="popup-button" id="confirmarPedido">Confirmar Pedido</button>
            <button class="popup-button" id="fecharPopup">Fechar</button>
        </div>
    </div>

    <script>
        // Variáveis e elementos
        const btnInserirPedido = document.getElementById('btnInserirPedido');
        const btnVerPedidos = document.getElementById('btnVerPedidos');
        const pedidoForm = document.getElementById('pedidoForm');
        const pedidosTabela = document.getElementById('pedidosTabela');
        const btnVoltar = document.getElementById('btnVoltar');
        const btnVoltarPedidos = document.getElementById('btnVoltarPedidos');
        const concluirPedido = document.getElementById('concluirPedido');
        const totalItens = document.getElementById('totalItens');
        const totalValor = document.getElementById('totalValor');
        const popup = document.getElementById('popup');
        const resumoPedido = document.getElementById('resumoPedido');
        const confirmarPedido = document.getElementById('confirmarPedido');
        const fecharPopup = document.getElementById('fecharPopup');
        const quantities = {
            maxBurguer: 0,
            xTudo: 0,
            xEggBacon: 0,
            cocaPequena: 0,
            heineken: 0
        };
        const prices = {
            maxBurguer: 20,
            xTudo: 23,
            xEggBacon: 17,
            cocaPequena: 3,
            heineken: 10
        };

        // Tela Inicial
        btnInserirPedido.addEventListener('click', function() {
            pedidoForm.style.display = 'block';
            pedidosTabela.style.display = 'none';
            popup.style.display = 'none'; // Garantindo que o pop-up esteja oculto ao iniciar a tela de inserção de pedidos
        });

        btnVerPedidos.addEventListener('click', function() {
            pedidoForm.style.display = 'none';
            pedidosTabela.style.display = 'block';
            popup.style.display = 'none'; // Garantindo que o pop-up esteja oculto ao acessar a tela de pedidos
        });

        // Voltar para tela inicial
        btnVoltar.addEventListener('click', function() {
            pedidoForm.style.display = 'none';
            pedidosTabela.style.display = 'none';
            popup.style.display = 'none'; // Garantindo que o pop-up esteja oculto ao voltar
        });

        btnVoltarPedidos.addEventListener('click', function() {
            pedidoForm.style.display = 'none';
            pedidosTabela.style.display = 'none';
            popup.style.display = 'none'; // Garantindo que o pop-up esteja oculto ao voltar para tela inicial
        });

        // Atualiza quantidade dos itens
        function updateQuantities() {
            document.getElementById('maxBurguerQty').textContent = quantities.maxBurguer;
            document.getElementById('xTudoQty').textContent = quantities.xTudo;
            document.getElementById('xEggBaconQty').textContent = quantities.xEggBacon;
            document.getElementById('cocaPequenaQty').textContent = quantities.cocaPequena;
            document.getElementById('heinekenQty').textContent = quantities.heineken;

            const totalItems = quantities.maxBurguer + quantities.xTudo + quantities.xEggBacon + quantities.cocaPequena + quantities.heineken;
            totalItens.textContent = totalItems;

            const totalValue = (quantities.maxBurguer * prices.maxBurguer) + (quantities.xTudo * prices.xTudo) + (quantities.xEggBacon * prices.xEggBacon) + (quantities.cocaPequena * prices.cocaPequena) + (quantities.heineken * prices.heineken);
            totalValor.textContent = totalValue.toFixed(2);
        }

        // Incrementar e decrementar quantidade
        const quantityControls = document.querySelectorAll('.quantity-controls');
        quantityControls.forEach(control => {
            control.querySelector('.increment').addEventListener('click', function() {
                const item = control.parentNode.querySelector('span').textContent.toLowerCase().replace(/ /g, '');
                quantities[item]++;
                updateQuantities();
            });
            control.querySelector('.decrement').addEventListener('click', function() {
                const item = control.parentNode.querySelector('span').textContent.toLowerCase().replace(/ /g, '');
                if (quantities[item] > 0) {
                    quantities[item]--;
                    updateQuantities();
                }
            });
        });

        // Concluir pedido e mostrar resumo no pop-up
concluirPedido.addEventListener('click', function() {
    let itemsSummary = '';
    let totalPedido = 0;  // Variável para somar o total do pedido
    for (let item in quantities) {
        if (quantities[item] > 0) {
            const itemTotal = quantities[item] * prices[item]; // Soma do valor do item
            totalPedido += itemTotal; // Adiciona o valor do item ao total do pedido
            itemsSummary += <li>${quantities[item]} x ${item.replace(/([A-Z])/g, ' $1').toUpperCase()} - R$ ${itemTotal.toFixed(2)}</li>;
        }
    }
    itemsSummary += <li><strong>Total: R$ ${totalPedido.toFixed(2)}</strong></li>;  // Soma total do pedido
    resumoPedido.innerHTML = itemsSummary;
    popup.style.display = 'flex'; // Exibir pop-up somente após clicar em Concluir Pedido
});

        // Confirmar pedido
        confirmarPedido.addEventListener('click', function() {
            let items = '';
            for (let item in quantities) {
                if (quantities[item] > 0) {
                    items += ${quantities[item]} x ${item.replace(/([A-Z])/g, ' $1').toUpperCase()}<br>;
                }
            }
            const total = (quantities.maxBurguer * prices.maxBurguer) + (quantities.xTudo * prices.xTudo) + (quantities.xEggBacon * prices.xEggBacon) + (quantities.cocaPequena * prices.cocaPequena) + (quantities.heineken * prices.heineken);
            const nome = prompt("Digite seu nome para o pedido:");

            // Adicionar à tabela
            const novaLinha = pedidosTabelaContent.insertRow();
            novaLinha.innerHTML = <td>${nome}</td><td>${items}</td><td>${total.toFixed(2)}</td>;
            popup.style.display = 'none';
            quantities.maxBurguer = quantities.xTudo = quantities.xEggBacon = quantities.cocaPequena = quantities.heineken = 0;
            updateQuantities();
        });

        // Fechar pop-up
        fecharPopup.addEventListener('click', function() {
            popup.style.display = 'none';
        });

        // Inicializa a tela
        updateQuantities();
    </script>
</body>
</html>
